<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://sp4ndey.github.io/howto/favicon.ico><link rel=stylesheet href=/howto/css/style.min.css><title>Write a file to S3 in Node.js</title></head><body><header id=banner><h2><a href=https://sp4ndey.github.io/howto/>How To...</a></h2><nav><ul><li><a href=/howto/ title=posts>posts</a></li><li><a href=/howto/tags title=tags>tags</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Write a file to S3 in Node.js</h1><div><time>January 7, 2022</time></div></header><p>Once I had figured out how to <a href=../read-a-file-line-by-line-from-s3-in-node.js/>read a file from S3</a>, I then had to write one. Given that the text I had to write wasn&rsquo;t large, this turned out to be very straightforward. Tested with <a href=https://aws.amazon.com/sdk-for-javascript/>AWS SDK</a> v3.45.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>AWS</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@aws-sdk/client-s3&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>writeFile</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>bucket</span><span class=p>,</span> <span class=nx>filename</span><span class=p>,</span> <span class=nx>text</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>s3</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AWS</span><span class=p>.</span><span class=nx>S3</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>s3</span><span class=p>.</span><span class=nx>putObject</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>Bucket</span><span class=o>:</span> <span class=nx>bucket</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Key</span><span class=o>:</span> <span class=nx>filename</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Body</span><span class=o>:</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>see also: <a href=../read-a-file-line-by-line-from-s3-in-node.js/>Read a file line by line from S3 in Node.js</a></p></article></main><footer id=footer>Â© 2021 Sunil Pandey</footer></body></html>